services:
  api:
    build:
      context: ./api
    restart: always
    environment:
      - PORT=${API_PORT:-3000}
      - DATABASE_PATH=${DATABASE_PATH:-/data/sqlite/database.sqlite}
      - NODE_ENV=production
    volumes:
      - sqlite_data:/data/sqlite
    ports:
      - "${API_PORT:-3000}:3000"

  frontend:
    build:
      context: ./view
      args:
        - VITE_API_URL=${VITE_API_URL:-http://localhost:3000}
    restart: always
    ports:
      - "${FRONTEND_PORT:-8080}:80"

volumes:
  sqlite_data:
    name: accounting_sqlite_data
